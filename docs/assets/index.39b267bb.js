import{d as B,r as g,n as R,w as F,o as A,c as w,u as y,a as H,b as z,e as m,f as S,F as W,g as q}from"./vendor.f1292010.js";const I=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}};I();const K=document.documentElement.clientWidth,P=document.documentElement.clientHeight,M=Math.floor(P/20),b=Math.floor(K*2/3/20),E=b*20,k=M*20,V=["6A5ACD","DC143C","1E90FF","2E8B57","DAA520","D2691E","B22222"],J=["width","height"],U=B({props:{mapArr:Array,updateMap:String,blockColor:String},setup(c){const n=c,a=g(),o=g();R(()=>{o.value=a.value.getContext("2d"),t(20,20,"#999999",.8)}),F(()=>n.updateMap,()=>{var e;(e=n==null?void 0:n.mapArr)==null||e.forEach((s,h)=>{s.forEach((d,u)=>{d===1&&(o.value.fillStyle=n.blockColor,o.value.fillRect(u*20,h*20,20,20))})})});const t=(e,s,h,d)=>{for(let u=0;u<=E;u+=e)o.value.moveTo(u,0),o.value.lineTo(u,k);for(let u=0;u<=k;u+=s)o.value.moveTo(0,u),o.value.lineTo(E,u);o.value.strokeStyle=h,o.value.lineWidth=d,o.value.stroke(),o.value.beginPath()};return(e,s)=>(A(),w("canvas",{ref:(h,d)=>{d.myCanvas=h,a.value=h},width:y(E),height:y(k)},null,8,J))}}),Z=[[[[5,0,1],[6,0,1],[5,1,1],[6,1,1]]],[[[5,0,0],[6,0,0],[7,0,0],[5,1,0],[6,1,1],[7,1,0],[5,2,1],[6,2,1],[7,2,1]]],[[[5,0,1],[6,0,1],[7,0,0],[5,1,0],[6,1,1],[7,1,0],[5,2,0],[6,2,1],[7,2,0]]],[[[5,0,0],[6,0,1],[7,0,1],[5,1,0],[6,1,1],[7,1,0],[5,2,0],[6,2,1],[7,2,0]]],[[[5,0,0],[6,0,1],[7,0,0],[5,1,0],[6,1,1],[7,1,1],[5,2,0],[6,2,0],[7,2,1]]],[[[5,0,0],[6,0,0],[7,0,1],[5,1,0],[6,1,1],[7,1,1],[5,2,0],[6,2,1],[7,2,0]]]],G=5,Q=9,D=(c=G)=>parseInt(String(Math.random()*(c+1))),O=()=>`#${V[D(Q)]}`,X=()=>Z[D()],Y=()=>{let c=[];for(let n=0;n<M;n+=1){const a=[];for(let o=0;o<b;o+=1)a.push(0);c.push(a)}return c};var j=(c,n)=>{for(const[a,o]of n)c[a]=o;return c};const ee=["width","height"],te=B({props:{operationBlock:String},emits:["mapArr","updateMap","blockColor"],setup(c,{emit:n}){const a=c,o=g(),t=g();let e=[],s=[],h=Date.now(),d=0;F(()=>a.operationBlock,(r,i)=>{v()});const u=r=>{let i=!1;return e.forEach((f,l)=>{f.forEach(p=>{if(l===0&&p[0]<=0&&p[2]===1&&r==="left"){i=!0;return}else if(l===e.length-1&&p[0]>=b-1&&p[2]===1&&r==="right"){i=!0;return}})}),i},v=async()=>{const r=await u(String(a.operationBlock));e.forEach((i,f)=>{i.forEach(l=>{a.operationBlock==="left"&&!r?l[0]-=1:a.operationBlock==="right"&&l[0]<b-1&&!r&&(l[0]+=1)})})},_=()=>{t.value=o.value.getContext("2d"),C()},C=()=>{t.value.fillStyle=O(),n("blockColor",String(O())),e=JSON.parse(JSON.stringify(X())),console.log(e),e.forEach((r,i)=>{r.forEach((f,l)=>{f[2]===1&&t.value.fillRect(f[0]*20,f[1]*20,20,20)})}),requestAnimationFrame(x)},L=()=>{let r=!1;return e.forEach((i,f)=>{i.forEach(l=>{f===0&&l[1]<=0&&s[l[1]][l[0]]===1&&(r=!0)})}),r},$=()=>{let r=!1;return e.forEach((i,f)=>{i.forEach(l=>{(f===e.length-1&&l[1]>=M-1||s[l[1]+1][l[0]]===1&&l[2]===1)&&(r=!0)})}),r},N=()=>{let r=!1;s.length===0&&(s=Y()),t.value.clearRect(0,0,E,k);const i=L(),f=$();return i?(alert("\u89E6\u9876\uFF01\u6E38\u620F\u7ED3\u675F~"),!0):(f?(e.forEach(l=>{l.forEach(p=>{p[2]===1&&(s[p[1]][p[0]]=1,n("mapArr",s),n("updateMap",`${Math.random()}`))})}),r=!0,C()):e.forEach(l=>{l.forEach(p=>{p[1]+=1,p[2]===1&&t.value.fillRect(p[0]*20,p[1]*20,20,20)})}),r)},T=r=>{d+=r;let i=!1;return d>100&&(d=0,i=N()),i},x=()=>{const r=T(Date.now()-h);h=Date.now(),r||requestAnimationFrame(x)};return H(()=>{_()}),(r,i)=>(A(),w("canvas",{ref:(f,l)=>{l.blockCanvas=f,o.value=f},width:y(E),height:y(k)},null,8,ee))}});var oe=j(te,[["__scopeId","data-v-6c085d6d"]]);const ne={class:"canvas-view"},re={class:"bg"},le={class:"block"},ae={class:"info-view"},ce=m("div",null,"\u5206\u6570\uFF1A0",-1),se=m("div",null,"\u5206\u6570\uFF1A0",-1),ie=B({props:{mapArr:Array},setup(c){z(v=>({c15e7242:n}));const n=`${k}px`,a=g(""),o=v=>{a.value=v},t=g(""),e=v=>{t.value=v,setTimeout(()=>{t.value=""},200)},s=g([]),h=v=>{s.value=v},d=g(""),u=v=>{d.value=v};return(v,_)=>(A(),w(W,null,[m("div",ne,[m("div",re,[S(U,{mapArr:s.value,updateMap:d.value,blockColor:a.value},null,8,["mapArr","updateMap","blockColor"])]),m("div",le,[S(oe,{onMapArr:h,onUpdateMap:u,operationBlock:t.value,onBlockColor:o},null,8,["operationBlock"])])]),m("div",ae,[ce,se,m("button",{onClick:_[0]||(_[0]=C=>e("left")),style:{"margin-top":"7rem"}},"\u5411\u5DE6"),m("button",{onClick:_[1]||(_[1]=C=>e("right"))},"\u5411\u53F3"),m("button",{onClick:_[2]||(_[2]=C=>e("rotate"))},"\u65CB\u8F6C")])],64))}});function ue(){const c=document.documentElement,n=document.body,a=()=>{const{clientWidth:o,clientHeight:t}=c;o<=t?c.style.fontSize=`${100*(o/750)}px`:c.style.fontSize=`${100*(t/750)}px`,n.style.fontSize="16px"};document.addEventListener("DOMContentLoaded",a,!1),window.onresize=a,a()}ue();q(ie).mount("#app");
